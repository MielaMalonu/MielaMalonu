<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Discord Servers</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <h1>Discord Servers</h1>
  <table>
    <thead>
      <tr>
        <th>Tagas</th>
        <th>Nari≈≥ Kiekis</th>
        <th>Pavadinimas</th>
        <th>Invitas</th>
        <th>Serverio Id</th>
      </tr>
    </thead>
    <tbody id="server-list">
      <!-- Data populated by JS -->
    </tbody>
  </table>

  <script>
const invites = [
  "la-cueva-de-cosi", "Hgb5rjxaKR", "Ta7mtrADZA", "cyberinfo", "reactionroles",
  "dualview", "emh", "valorantil", "jb", "lgbtqia", "shaun", "moco",
  "polarguild", "gca", "gamersland", "celestrials", "titsrp", "valcraft",
  "nico-vip", "GBtkSEbzj5"
];

async function fetchServerData(invite) {
  try {
    const res = await fetch(`https://discord.com/api/v10/invites/${invite}?with_counts=true`);
    if (!res.ok) throw new Error('Failed to fetch');
    const data = await res.json();
    
    const server = data.guild;
    return {
      tag: data.profile.tag, // Simple tag logic
      icon: `https://cdn.discordapp.com/clan-badges/${server.id}/${data.profile.badge_hash}.png?size=16`,
      name: server.name,
      memberCount: data.approximate_member_count,
      invite,
      id: server.id
    };
  } catch (err) {
    console.error(`Error fetching invite ${invite}:`, err);
    return null;
  }
}

async function loadServers() {
  const list = document.getElementById("server-list");

  for (const invite of invites) {
    const server = await fetchServerData(invite);
    if (!server) continue;

    const row = document.createElement("tr");

    row.innerHTML = `
      <td><img src="${server.icon}" alt="" width="25" height="25" style="vertical-align:middle; border-radius:50%; margin-right:5px;"> ${server.tag}</td>
      <td>${server.memberCount.toLocaleString()}</td>
      <td>${server.name}</td>
      <td><a href="https://discord.gg/${server.invite}" target="_blank">${server.invite}</a></td>
      <td>${server.id}</td>
    `;
    list.appendChild(row);
  }
}

loadServers();
</script>
</body>
</html>
